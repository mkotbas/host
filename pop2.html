<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pop Kodları Seçim Sistemi</title>
    <style>
        /* Mevcut CSS kodlarınız buraya gelecek */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .frame {
            border: 2px solid #8b0000;
            border-radius: 10px;
            padding: 15px;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            text-align: center;
            padding: 10px;
            margin: 0px 0 20px;
            background: linear-gradient(to right, #ff5c5c, #8b0000);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

<div id="content" style="display: none;">
    <div class="frame">
        <h2 class="header">Arçelik Pop Kodları</h2>
        <!-- Sayfanın geri kalan içerikleri (checkboxlar, butonlar) buraya gelecek -->
    </div>
</div>

<div id="passwordPrompt" style="display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f4f4f4;">
    <div>
        <label for="password">Parola:</label>
        <input type="password" id="password" />
        <button onclick="verifyPassword()">Giriş Yap</button>
        <p id="errorMessage" style="color: red; display: none;">Hatalı parola. Lütfen tekrar deneyin.</p>
    </div>
</div>

<script>
    const passwordUrl = 'https://mkotbas.github.io/mlharc/mp4827.html';
    const expirationTime = 5 * 60 * 1000; // 5 dakika (milisaniye cinsinden)

    // Çerez yazma fonksiyonu
    function setCookie(name, value, duration) {
        const date = new Date();
        date.setTime(date.getTime() + duration);
        document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
    }

    // Çerez okuma fonksiyonu
    function getCookie(name) {
        const cookieArray = document.cookie.split(';');
        for (let cookie of cookieArray) {
            cookie = cookie.trim();
            if (cookie.startsWith(name + '=')) {
                return cookie.substring(name.length + 1);
            }
        }
        return null;
    }

    // Çerezleri silme fonksiyonu
    function clearCookies() {
        document.cookie.split(";").forEach(cookie => {
            document.cookie = cookie.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
        });
    }

    // Parolayı doğrulayan fonksiyon
    async function verifyPassword() {
        const inputPassword = document.getElementById('password').value;

        try {
            // Parola listesini URL'den çek
            const response = await fetch(passwordUrl);
            const text = await response.text();
            const validPasswords = text.split(',');

            if (validPasswords.includes(inputPassword.trim())) {
                // Doğru parola girildiğinde
                setCookie("accessGranted", "true", expirationTime);
                document.getElementById('passwordPrompt').style.display = 'none';
                document.getElementById('content').style.display = 'block';
            } else {
                // Yanlış parola girildiğinde
                clearCookies();
                document.getElementById('errorMessage').style.display = 'block';
                setTimeout(() => {
                    location.reload();
                }, 1000);
            }
        } catch (error) {
            console.error("Parola doğrulanırken hata oluştu:", error);
        }
    }

    // Sayfa yüklendiğinde çerezleri kontrol et
    window.onload = function() {
        const accessGranted = getCookie("accessGranted");

        if (accessGranted === "true") {
            // Parola önceden doğrulandıysa sayfayı göster
            document.getElementById('passwordPrompt').style.display = 'none';
            document.getElementById('content').style.display = 'block';
        } else {
            // Parola doğrulanmadıysa parola giriş ekranını göster
            document.getElementById('passwordPrompt').style.display = 'flex';
            document.getElementById('content').style.display = 'none';
        }
    };
</script>

</body>
</html>
