<div id="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p>Veriler işleniyor, lütfen bekleyin...</p>
</div>

<div id="admin-panel-overlay" class="modal-overlay" style="display: none;">
    <div class="modal-panel">
        <div class="modal-header">
            <h3><i class="fas fa-cogs"></i> Yönetim Paneli</h3>
        </div>
        <div class="modal-body">
            <div class="settings-item">
                <label for="monthly-target-input">Global Aylık Ziyaret Hedefi</label>
                <input type="number" id="monthly-target-input" placeholder="Örn: 47">
                <small>Bu, "Genel Bakış (Tüm Sistem)" görünümünün hedefini belirler. Kullanıcıların kişisel hedefleri, onlara atanan bayi sayısıdır.</small>
            </div>
        </div>
        <div class="modal-footer">
            <button id="save-settings-btn" class="btn-success btn-sm"><i class="fas fa-save"></i> Kaydet</button>
            <button id="close-admin-panel-btn" class="btn-danger btn-sm">Paneli Kapat</button>
        </div>
    </div>
</div>


<div class="card" id="audit-tracker-manager">
    <div class="card-header">
        <div class="header-placeholder"></div> <button id="open-admin-panel-btn" class="btn-primary btn-sm"><i class="fas fa-cogs"></i> Yönetim Paneli</button>
    </div>
    
    <div id="upload-area">
        <p style="font-size: 13px; color: var(--light-text-secondary); margin: 20px; text-align: center;">
            <i class="fas fa-info-circle"></i> Sistemde görüntülenecek bayi listesi bulunamadı. Lütfen veritabanını kontrol edin.
        </p>
    </div>

    <div id="loaded-data-area" style="display: none;">
         <div class="loaded-data-info">
            <p><i class="fas fa-database"></i> Veriler buluttan yüklendi.</p>
            <div class="data-actions">
                <button id="reset-data-btn" class="btn-danger btn-sm" title="Sadece 'Genel Bakış' görünümünde etkindir"><i class="fas fa-eraser"></i> Yıllık Verileri Sıfırla</button>
            </div>
        </div>
    </div>
    
    <div id="dashboard-content" style="display: none;">
        <div class="panel-header">
             <h3 id="dashboard-title"></h3>
             <div id="annual-performance-indicator"></div>
        </div>
       
        <div class="dashboard-grid">
            <div class="stat-card">
                <span><i class="fas fa-briefcase"></i> Kalan İş Günü</span>
                <p id="work-days-count">0</p>
            </div>
            <div class="stat-card">
                <span><i class="fas fa-bullseye"></i> Aylık Denetim Hedefi</span>
                <p id="total-stores-count">0</p>
            </div>
            <div class="stat-card completed">
                <span><i class="fas fa-check"></i> <span id="stat-completed-label">Bu Ay Denetlenen</span></span>
                <p id="audited-stores-count">0</p>
            </div>
            <div class="stat-card remaining">
                <span><i class="fas fa-hourglass-start"></i> Hedefe Kalan</span>
                <p id="remaining-stores-count">0</p>
            </div>
        </div>

        <div class="admin-user-selector-container" id="admin-user-selector-container" style="display: none;">
            <div class="filter-item">
                <label for="admin-user-filter"><i class="fas fa-user-shield"></i> Admin: Veri Görünümü Seç</label>
                <select id="admin-user-filter"></select>
            </div>
            <small>Varsayılan olarak 'Benim Verilerim' gösterilir. Global veriler veya başka bir kullanıcı için seçim yapabilirsiniz.</small>
        </div>
        <div class="multi-filter-container">
            <div class="filter-item">
                <label for="period-filter">Görünüm Periyodu</label>
                <select id="period-filter">
                    <option value="aylik" selected>Aylık (Sadece Bu Ay)</option>
                    <option value="yillik">Yıllık (Tüm Yıl)</option>
                </select>
            </div>
            <div class="filter-item">
                <label for="bolge-filter">Bölge</label>
                <select id="bolge-filter"></select>
            </div>
            <div class="filter-item">
                <label for="yonetmen-filter">Bayi Yönetmeni</label>
                <select id="yonetmen-filter"></select>
            </div>
            <div class="filter-item">
                <label for="sehir-filter">Şehir</label>
                <select id="sehir-filter"></select>
            </div>
            <div class="filter-item">
                <label for="ilce-filter">İlçe</label>
                <select id="ilce-filter"></select>
            </div>
        </div>

        <div class="audit-lists-container">
            <div class="audit-list-column">
                <div class="list-header-wrapper">
                    <h4><i class="fas fa-list-ul"></i> <span id="list-remaining-label">Denetlenecek Bayiler</span></h4>
                    <select id="local-city-filter" class="header-select" title="Şehre Göre Süz">
                        <option value="Tümü">Tüm Şehirler</option>
                    </select>
                </div>
                <div id="denetlenecek-bayiler-container"></div>
            </div>
            <div class="audit-list-column">
                <div class="list-header-wrapper">
                    <h4><i class="fas fa-check-double"></i> <span id="list-completed-label">Bu Ay Denetlenenler</span></h4>
                </div>
                <div id="denetlenen-bayiler-container"></div>
            </div>
        </div>
    </div>
</div>