<div id="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p>Veriler işleniyor, lütfen bekleyin...</p>
</div>

<div id="admin-panel-overlay" class="modal-overlay" style="display: none;">
    <div class="modal-panel">
        <div class="modal-header">
            <h3><i class="fas fa-cogs"></i> Yönetim Paneli</h3>
        </div>
        <div class="modal-body">
            <div class="settings-item">
                <label for="monthly-target-input">Aylık Ziyaret Hedefini Değiştir</label>
                <input type="number" id="monthly-target-input" placeholder="Örn: 47">
                <small>Yeni hedefi girip kaydettiğinizde panel güncellenecektir.</small>
            </div>
             <div class="settings-item" style="margin-top: 20px; border-top: 1px solid #e2e8f0; padding-top: 15px;">
                <label>Denetim İlerlemesini Sıfırla</label>
                <button id="reset-data-btn" class="btn-danger btn-sm"><i class="fas fa-eraser"></i> Bu Yılın Verilerini Sıfırla</button>
                 <small>Bu işlem, bu yıla ait tüm denetim kayıtlarını 'geri alınmış' olarak işaretler. Sayaçlar sıfırlanır ama raporlar silinmez.</small>
            </div>
        </div>
        <div class="modal-footer">
            <button id="save-settings-btn" class="btn-success btn-sm"><i class="fas fa-save"></i> Hedefi Kaydet</button>
            <button id="close-admin-panel-btn" class="btn-danger btn-sm">Paneli Kapat</button>
        </div>
    </div>
</div>


<div class="card" id="audit-tracker-manager">
    <div class="card-header">
        <div class="header-placeholder">
             <p style="font-size: 12px; color: var(--secondary-text, #94a3b8);">
                <i class="fas fa-info-circle"></i> Bu modül, bayi bilgilerini ve denetim kayıtlarını doğrudan buluttan okur. Bayi listesini güncellemek için <b>Bayi Yöneticisi -> Bayi Bilgileri</b> menüsünü kullanın.
            </p>
        </div> 
        <button id="open-admin-panel-btn" class="btn-primary btn-sm"><i class="fas fa-cogs"></i> Yönetim Paneli</button>
    </div>
    
    <div id="dashboard-content" style="display: none;">
        <div class="panel-header">
             <h3 id="dashboard-title"></h3>
             <div id="annual-performance-indicator"></div>
        </div>
       
        <div class="dashboard-grid">
            <div class="stat-card">
                <span><i class="fas fa-briefcase"></i> Kalan İş Günü</span>
                <p id="work-days-count">0</p>
            </div>
            <div class="stat-card">
                <span><i class="fas fa-bullseye"></i> Aylık Denetim Hedefi</span>
                <p id="total-stores-count">0</p>
            </div>
            <div class="stat-card completed">
                <span><i class="fas fa-check"></i> Bu Ay Denetlenen</span>
                <p id="audited-stores-count">0</p>
            </div>
            <div class="stat-card remaining">
                <span><i class="fas fa-hourglass-start"></i> Hedefe Kalan</span>
                <p id="remaining-stores-count">0</p>
            </div>
        </div>

        <div class="multi-filter-container">
            <div class="filter-item">
                <label for="bolge-filter">Bölge</label>
                <select id="bolge-filter"></select>
            </div>
            <div class="filter-item">
                <label for="yonetmen-filter">Bayi Yönetmeni</label>
                <select id="yonetmen-filter"></select>
            </div>
            <div class="filter-item">
                <label for="sehir-filter">Şehir</label>
                <select id="sehir-filter"></select>
            </div>
            <div class="filter-item">
                <label for="ilce-filter">İlçe</label>
                <select id="ilce-filter"></select>
            </div>
        </div>

        <div class="audit-lists-container">
            <div class="audit-list-column">
                <h4><i class="fas fa-list-ul"></i> Denetlenecek Bayiler (Aylık)</h4>
                <div id="denetlenecek-bayiler-container"></div>
            </div>
            <div class="audit-list-column">
                <h4><i class="fas fa-check-double"></i> Bu Ay Denetlenenler</h4>
                <div id="denetlenen-bayiler-container"></div>
            </div>
        </div>
    </div>
</div>