<h2><i class="fas fa-database"></i> Veritabanı Ayarları ve Bakım Araçları</h2>

<div class="management-section">
    <h4><i class="fas fa-archive"></i> Yedekleme ve Geri Yükleme</h4>
    <div class="backup-options-grid">
        <div class="backup-option-card">
            <h3><i class="fas fa-cloud-download-alt"></i> Raporları Yedekle</h3>
            <p>Bulutta kayıtlı tüm bayi raporlarını tek bir `.json` dosyası olarak bilgisayarınıza indirir.</p>
            <button id="backup-btn" class="btn-primary"><i class="fas fa-download"></i> Yedek Dosyasını İndir</button>
        </div>
        <div class="backup-option-card">
            <h3><i class="fas fa-cloud-upload-alt"></i> Yedekten Geri Yükle</h3>
            <p>Bilgisayarınızdaki `.json` yedek dosyasını seçerek buluta yükler. Bu işlem buluttaki mevcut verilerin üzerine yazar!</p>
            <button id="restore-from-backup-btn" class="btn-primary"><i class="fas fa-folder-open"></i> Dosya Seç ve Yükle</button>
        </div>
        <div class="backup-option-card">
            <h3><i class="fas fa-compress-arrows-alt"></i> Yedekleri Birleştir</h3>
            <p>Birden fazla yedek dosyasını seçerek, içlerindeki en güncel raporları içeren tek bir yeni yedek dosyası oluşturur.</p>
            <button id="merge-backups-btn" class="btn-primary"><i class="fas fa-object-group"></i> Dosyaları Seç ve Birleştir</button>
        </div>
    </div>
</div>

<div class="management-section">
    <h4><i class="fas fa-database"></i> Veri Bakım Araçları</h4>
    <div class="backup-options-grid">
         <div class="backup-option-card">
            <h3><i class="fas fa-user-slash"></i> Kalıntı Rapor Analizi</h3>
            <p>Ana bayi listesinden silinmiş ancak raporları hala veritabanında duran "kalıntı" (orphan) verileri bulur ve silmenizi sağlar.</p>
            <button id="analyze-orphan-reports-btn" class="btn-warning"><i class="fas fa-search"></i> Analizi Başlat</button>
        </div>
        <div class="backup-option-card">
            <h3><i class="fas fa-link-slash"></i> Veri Tutarlılığı Kontrolü</h3>
            <p>Bayi listesi, e-posta listesi gibi farklı tablolar arasındaki uyumsuzlukları tespit eder ve raporlar.</p>
            <button id="check-consistency-btn" class="btn-warning"><i class="fas fa-check-double"></i> Kontrol Et</button>
        </div>
        <div class="backup-option-card">
            <h3><i class="fas fa-eraser"></i> Gereksiz Alan Temizleyici</h3>
            <p>Tüm raporlardan, artık kullanılmayan belirli bir veri alanını (ör: 'isSpecialVisit') kalıcı olarak temizler.</p>
            <button id="clean-field-btn" class="btn-warning"><i class="fas fa-broom"></i> Alan Temizleyiciyi Aç</button>
        </div>
        <div class="backup-option-card">
            <h3><i class="fas fa-heart-crack"></i> Bozuk Rapor Temizliği</h3>
            <p>İçi boş veya hatalı yapıdaki "hayalet" raporları tespit eder. Bu kayıtlar "Geçersiz rapor verisi" hatasına neden olabilir.</p>
            <button id="analyze-corrupt-reports-btn" class="btn-warning"><i class="fas fa-search-dollar"></i> Analiz Et ve Temizle</button>
        </div>
    </div>
</div>

<input type="file" id="restore-file-input" accept=".json" style="display: none;">
<input type="file" id="merge-file-input" accept=".json" style="display: none;" multiple>